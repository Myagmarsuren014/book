<div class="bg-white w-full py-5 mx-auto max-w-6xl rounded-lg px-4 lg:px-8">
    <div class="flex justify-center items-center mb-5">
        <h2 class="text-3xl font-semibold text-center border-b-2 border-blue-500">
            Шинээр нэмэгдсэн
        </h2>
    </div>

    <div class="relative">
        <!-- Navigation Buttons -->
        <button id="prev-btn"
        class="absolute left-0 top-1/2 transform -translate-y-1/2 btn-nav ml-5 hidden xl:block ">
        &#10094;
    </button>
    <button id="next-btn"
        class="absolute right-0 top-1/2 transform -translate-y-1/2 btn-nav mr-5 hidden xl:block">
        &#10095;
    </button>
    
    
    

        <!-- Product Slider -->
        <div id="product-slider" class="product-slider flex gap-8 overflow-x-auto scrollbar-hide">
            <!-- Repeatable Product Cards -->
            <div class="single-slide p-2 border-2 border-gray-200 rounded-lg">
                <div class="product-card flex flex-col items-center w-full md:w-[256px]">
                    <div class="card-image mb-4">
                        <a href="https://legaldata.mn/book/view/370">
                            <img src="https://legaldata.mn/storage/pictures/2780/01JHHDTA9PHDC7582DGBPHZ1R3.png"
                                alt="Эрүүгийн эрх зүйн хууль ёсны зарчим" class="object-cover rounded-md">
                        </a>
                    </div>
                    <div class="price-block text-center">
                        <span class="text-lg font-bold text-green-600">50,000₮</span>
                        <a href="{{ route('bookStore.buySection') }}"
                            class="block mt-2 text-white bg-blue-500 hover:bg-blue-700 px-4 py-2 rounded-md">
                            Сагсанд хийх
                        </a>
                    </div>
                    <div class="product-header mt-3 text-center">
                        <h3 class="text-md font-semibold">
                            <a href="https://legaldata.mn/book/view/370">Эрүүгийн эрх зүйн хууль ёсны зарчим /Онол,
                                философи/</a>
                        </h3>
                        <a href="#" class="text-sm text-gray-600">Б.Мөнх-Эрдэнэ</a>
                    </div>
                </div>
            </div>

            <div class="single-slide p-2 border-2 border-gray-200 rounded-lg">
                <div class="product-card flex flex-col items-center w-full md:w-[256px]">
                    <div class="card-image mb-4">
                        <a href="https://legaldata.mn/book/view/370">
                            <img src="https://legaldata.mn/storage/pictures/2780/01JHHDTA9PHDC7582DGBPHZ1R3.png"
                                alt="Эрүүгийн эрх зүйн хууль ёсны зарчим" class="object-cover rounded-md">
                        </a>
                    </div>
                    <div class="price-block text-center">
                        <span class="text-lg font-bold text-green-600">50,000₮</span>
                        <a href="{{ route('bookStore.buySection') }}"
                            class="block mt-2 text-white bg-blue-500 hover:bg-blue-700 px-4 py-2 rounded-md">
                            Сагсанд хийх
                        </a>
                    </div>
                    <div class="product-header mt-3 text-center">
                        <h3 class="text-md font-semibold">
                            <a href="https://legaldata.mn/book/view/370">Эрүүгийн эрх зүйн хууль ёсны зарчим /Онол,
                                философи/</a>
                        </h3>
                        <a href="#" class="text-sm text-gray-600">Б.Мөнх-Эрдэнэ</a>
                    </div>
                </div>
            </div>


            <div class="single-slide p-2 border-2 border-gray-200 rounded-lg">
                <div class="product-card flex flex-col items-center w-full md:w-[256px]">
                    <div class="card-image mb-4">
                        <a href="https://legaldata.mn/book/view/370">
                            <img src="https://legaldata.mn/storage/pictures/2780/01JHHDTA9PHDC7582DGBPHZ1R3.png"
                                alt="Эрүүгийн эрх зүйн хууль ёсны зарчим" class="object-cover rounded-md">
                        </a>
                    </div>
                    <div class="price-block text-center">
                        <span class="text-lg font-bold text-green-600">50,000₮</span>
                        <a href="{{ route('bookStore.buySection') }}"
                            class="block mt-2 text-white bg-blue-500 hover:bg-blue-700 px-4 py-2 rounded-md">
                            Сагсанд хийх
                        </a>
                    </div>
                    <div class="product-header mt-3 text-center">
                        <h3 class="text-md font-semibold">
                            <a href="https://legaldata.mn/book/view/370">Эрүүгийн эрх зүйн хууль ёсны зарчим /Онол,
                                философи/</a>
                        </h3>
                        <a href="#" class="text-sm text-gray-600">Б.Мөнх-Эрдэнэ</a>
                    </div>
                </div>
            </div>

            <div class="single-slide p-2 border-2 border-gray-200 rounded-lg">
                <div class="product-card flex flex-col items-center w-full md:w-[256px]">
                    <div class="card-image mb-4">
                        <a href="https://legaldata.mn/book/view/370">
                            <img src="https://legaldata.mn/storage/pictures/2780/01JHHDTA9PHDC7582DGBPHZ1R3.png"
                                alt="Эрүүгийн эрх зүйн хууль ёсны зарчим" class="object-cover rounded-md">
                        </a>
                    </div>
                    <div class="price-block text-center">
                        <span class="text-lg font-bold text-green-600">50,000₮</span>
                        <a href="{{ route('bookStore.buySection') }}"
                            class="block mt-2 text-white bg-blue-500 hover:bg-blue-700 px-4 py-2 rounded-md">
                            Сагсанд хийх
                        </a>
                    </div>
                    <div class="product-header mt-3 text-center">
                        <h3 class="text-md font-semibold">
                            <a href="https://legaldata.mn/book/view/370">Эрүүгийн эрх зүйн хууль ёсны зарчим /Онол,
                                философи/</a>
                        </h3>
                        <a href="#" class="text-sm text-gray-600">Б.Мөнх-Эрдэнэ</a>
                    </div>
                </div>
            </div>

            <div class="single-slide p-2 border-2 border-gray-200 rounded-lg">
                <div class="product-card flex flex-col items-center w-full md:w-[256px]">
                    <div class="card-image mb-4">
                        <a href="https://legaldata.mn/book/view/370">
                            <img src="https://legaldata.mn/storage/pictures/2780/01JHHDTA9PHDC7582DGBPHZ1R3.png"
                                alt="Эрүүгийн эрх зүйн хууль ёсны зарчим" class="object-cover rounded-md">
                        </a>
                    </div>
                    <div class="price-block text-center">
                        <span class="text-lg font-bold text-green-600">50,000₮</span>
                        <a href="{{ route('bookStore.buySection') }}"
                            class="block mt-2 text-white bg-blue-500 hover:bg-blue-700 px-4 py-2 rounded-md">
                            Сагсанд хийх
                        </a>
                    </div>
                    <div class="product-header mt-3 text-center">
                        <h3 class="text-md font-semibold">
                            <a href="https://legaldata.mn/book/view/370">Эрүүгийн эрх зүйн хууль ёсны зарчим /Онол,
                                философи/</a>
                        </h3>
                        <a href="#" class="text-sm text-gray-600">Б.Мөнх-Эрдэнэ</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dots Navigation -->
        <div id="dots-container" class="flex justify-center mt-4 gap-2">
            <!-- Dots will be dynamically created -->
        </div>
    </div>
</div>


<script>
    document.addEventListener("DOMContentLoaded", function() {
        const slider = document.getElementById("product-slider");
        const nextBtn = document.getElementById("next-btn");
        const prevBtn = document.getElementById("prev-btn");
        const dotsContainer = document.getElementById("dots-container");
        const slides = document.querySelectorAll(".single-slide");
        let currentIndex = 0;
        let autoSlide;

        const getCardsPerSlide = () => {
            if (window.innerWidth >= 1024) {
                return 4; // Desktop
            } else if (window.innerWidth >= 768) {
                return 3; // Tablet
            } else {
                return 1; // Mobile
            }
        };

        let cardsPerSlide = getCardsPerSlide();
        const totalSlides = Math.ceil(slides.length / cardsPerSlide);

        // Initialize Dots
        const initializeDots = () => {
            dotsContainer.innerHTML = "";
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement("div");
                dot.classList.add("dot");
                if (i === 0) dot.classList.add("active");
                dot.addEventListener("click", () => moveToSlide(i));
                dotsContainer.appendChild(dot);
            }
        };

        // Navigation Button Handlers
        nextBtn.addEventListener("click", () => moveToSlide(currentIndex + 1));
        prevBtn.addEventListener("click", () => moveToSlide(currentIndex - 1));

        // Move to Slide Function
        const moveToSlide = (index) => {
            if (index < 0) {
                currentIndex = totalSlides - 1;
            } else if (index >= totalSlides) {
                currentIndex = 0;
            } else {
                currentIndex = index;
            }
            slider.scrollTo({
                left: slider.offsetWidth * currentIndex,
                behavior: "smooth",
            });
            updateDots();
        };

        // Update Active Dot
        const updateDots = () => {
            document.querySelectorAll(".dot").forEach((dot, index) => {
                dot.classList.toggle("active", index === currentIndex);
            });
        };

        // Auto Slide
        const startAutoSlide = () => {
            autoSlide = setInterval(() => {
                moveToSlide(currentIndex + 1);
            }, 4000);
        };

        const stopAutoSlide = () => clearInterval(autoSlide);

        // Responsive Handling
        const handleResize = () => {
            cardsPerSlide = getCardsPerSlide();
            initializeDots();
            currentIndex = 0;
            moveToSlide(0);
        };

        window.addEventListener("resize", handleResize);

        // Initialize on Load
        handleResize();
        startAutoSlide();

        slider.addEventListener("mouseover", stopAutoSlide);
        slider.addEventListener("mouseout", startAutoSlide);
    });
</script>
